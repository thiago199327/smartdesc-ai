<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Core | Next Gen AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root { --primary: #007AFF; --dark: #000000; --bg: #F5F5F7; --glass: rgba(255, 255, 255, 0.8); }
        body { font-family: 'Outfit', sans-serif; background: var(--bg); margin: 0; display: flex; height: 100vh; overflow: hidden; color: #1d1d1f; }
        
        /* SIDEBAR LUXO */
        .sidebar { width: 280px; background: var(--dark); color: white; display: flex; flex-direction: column; padding: 40px 30px; z-index: 10; }
        .sidebar h2 { color: white; font-size: 1.5rem; margin-bottom: 50px; font-weight: 600; letter-spacing: -0.5px; }
        .sidebar h2 span { color: var(--primary); }
        
        .nav-item { padding: 15px 0; color: #86868b; text-decoration: none; font-size: 1.1rem; display: flex; align-items: center; gap: 15px; transition: 0.3s; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .nav-item:hover, .nav-item.active { color: white; transform: translateX(5px); }
        .nav-item i { width: 25px; text-align: center; }

        .team-status { margin-top: auto; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 16px; backdrop-filter: blur(10px); }
        .team-status h4 { margin: 0 0 10px 0; font-size: 0.9rem; color: #aaa; text-transform: uppercase; }
        .avatar-group { display: flex; gap: -10px; }
        .avatar-mini { width: 30px; height: 30px; border-radius: 50%; border: 2px solid var(--dark); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; color: white; }
        
        /* MAIN CONTENT */
        .main-content { flex: 1; padding: 50px; overflow-y: auto; position: relative; }
        .header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 50px; }
        .header h1 { font-size: 2.5rem; margin: 0; letter-spacing: -1px; background: linear-gradient(90deg, #1d1d1f, #434344); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .badge { background: linear-gradient(135deg, #007AFF, #5856D6); color: white; padding: 8px 16px; border-radius: 20px; font-weight: 600; font-size: 0.8rem; box-shadow: 0 4px 10px rgba(0,122,255,0.3); }

        /* CARDS PREMIUM */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; margin-bottom: 50px; }
        .card { background: white; border-radius: 24px; padding: 35px; box-shadow: 0 20px 40px rgba(0,0,0,0.05); transition: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1); border: 1px solid white; position: relative; overflow: hidden; }
        .card:hover { transform: translateY(-10px); box-shadow: 0 30px 60px rgba(0,0,0,0.1); }
        
        .card-icon { width: 60px; height: 60px; background: #f2f2f7; border-radius: 18px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--primary); margin-bottom: 25px; transition: 0.3s; }
        .card:hover .card-icon { background: var(--primary); color: white; }
        
        .card h3 { font-size: 1.4rem; margin: 0 0 10px 0; }
        .card p { color: #86868b; font-size: 1rem; line-height: 1.6; margin-bottom: 25px; }
        
        .employee-tag { position: absolute; top: 30px; right: 30px; font-size: 0.8rem; color: #86868b; background: #f5f5f7; padding: 5px 12px; border-radius: 12px; }

        /* INPUTS & BUTTONS */
        .input-group { background: #f5f5f7; border-radius: 16px; padding: 5px; display: flex; margin-top: 15px; border: 1px solid transparent; transition: 0.3s; }
        .input-group:focus-within { background: white; border-color: var(--primary); box-shadow: 0 0 0 4px rgba(0,122,255,0.1); }
        .input-field { border: none; background: transparent; padding: 12px 15px; width: 100%; outline: none; font-family: inherit; font-size: 1rem; }
        
        .btn-action { background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 12px; font-weight: 600; cursor: pointer; transition: 0.2s; white-space: nowrap; }
        .btn-action:hover { background: #0062cc; }

        /* RESULT BOX */
        .result-box { margin-top: 20px; background: #1d1d1f; color: #f5f5f7; padding: 25px; border-radius: 18px; font-size: 0.95rem; line-height: 1.6; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .result-box strong { color: #007AFF; }

        /* CHAT FLOATING (GEM) */
        .chat-widget { position: fixed; bottom: 40px; right: 40px; z-index: 100; }
        .chat-btn { width: 70px; height: 70px; background: black; border-radius: 50%; color: white; display: flex; justify-content: center; align-items: center; font-size: 1.8rem; cursor: pointer; box-shadow: 0 15px 35px rgba(0,0,0,0.3); transition: 0.3s; border: 2px solid rgba(255,255,255,0.2); }
        .chat-btn:hover { transform: scale(1.1); }
        
        .chat-window { position: absolute; bottom: 90px; right: 0; width: 380px; height: 550px; background: white; border-radius: 24px; box-shadow: 0 40px 80px rgba(0,0,0,0.2); display: none; flex-direction: column; overflow: hidden; animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); border: 1px solid rgba(0,0,0,0.05); }
        .chat-header { padding: 25px; background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 15px; z-index: 2; }
        .chat-body { flex: 1; padding: 25px; overflow-y: auto; background: #fbfbfd; display: flex; flex-direction: column; gap: 15px; }
        .msg { padding: 12px 18px; border-radius: 18px; max-width: 80%; font-size: 0.95rem; line-height: 1.5; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
        .msg.gem { background: white; border-bottom-left-radius: 4px; color: #1d1d1f; }
        .msg.user { background: var(--primary); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
        .chat-footer { padding: 20px; background: white; border-top: 1px solid #eee; display: flex; gap: 10px; }

        @keyframes slideUp { from { opacity: 0; transform: translateY(40px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>Smart <span>Core</span></h2>
        <a href="#" class="nav-item active"><i class="fas fa-home"></i> Vis√£o Geral</a>
        <a href="#" class="nav-item"><i class="fas fa-bullseye"></i> Campanhas Ads</a>
        <a href="#" class="nav-item"><i class="fas fa-magic"></i> Est√∫dio Vision</a>
        <a href="#" class="nav-item"><i class="fas fa-wallet"></i> Financeiro</a>

        <div class="team-status">
            <h4>Equipe Online</h4>
            <div class="avatar-group">
                <div class="avatar-mini" style="background:#f59e0b;" title="L√©o">L</div>
                <div class="avatar-mini" style="background:#ec4899;" title="Bella">B</div>
                <div class="avatar-mini" style="background:#10b981;" title="Tavos">T</div>
                <div class="avatar-mini" style="background:#007AFF;" title="Gem">G</div>
            </div>
            <p style="font-size:0.7rem; color:rgba(255,255,255,0.5); margin-top:10px;">Conectado: Gemini 3 Preview</p>
        </div>
    </div>

    <main class="main-content">
        <div class="header">
            <div>
                <h1>Bem-vindo, Mestre.</h1>
                <p style="color: #86868b; margin-top: 10px;">Sua equipe de IA est√° operando no n√≠vel m√°ximo.</p>
            </div>
            <div class="badge">üíé GEMINI 3 READY</div>
        </div>

        <div class="grid">
            
            <div class="card">
                <span class="employee-tag">Staff: L√©o üü†</span>
                <div class="card-icon"><i class="fas fa-pen-nib"></i></div>
                <h3>Gerador de Copy (Pro)</h3>
                <p>O L√©o usa o <strong>Gemini 3 Pro</strong> para criar textos de elite.</p>
                <div class="input-group">
                    <input type="text" class="input-field" id="leo-input" placeholder="Nome do produto...">
                    <button class="btn-action" onclick="callEmployee('leo')">Gerar</button>
                </div>
                <div id="result-leo" class="result-box"></div>
            </div>

            <div class="card">
                <span class="employee-tag">Staff: Bella üå∏</span>
                <div class="card-icon"><i class="fas fa-eye"></i></div>
                <h3>Est√∫dio Vision (Pro)</h3>
                <p>A Bella usa o modelo multimodal para analisar est√©tica.</p>
                <input type="file" id="bella-input" accept="image/*" style="margin-bottom:10px;">
                <div id="bella-preview-box" style="height:150px; background:#f5f5f7; border-radius:12px; display:flex; align-items:center; justify-content:center; overflow:hidden;">
                    <img id="bella-img" style="max-width:100%; max-height:100%; display:none;">
                    <span style="color:#aaa; font-size:0.8rem;">Preview da Imagem</span>
                </div>
                <button class="btn-action" style="width:100%; margin-top:15px;" onclick="callEmployee('bella')">Analisar Foto</button>
                <div id="result-bella" class="result-box"></div>
            </div>

            <div class="card">
                <span class="employee-tag">Staff: Tavos üü¢</span>
                <div class="card-icon"><i class="fas fa-bolt"></i></div>
                <h3>Flash Auditoria</h3>
                <p>Sr. Tavos usa o <strong>Gemini 3 Flash</strong> para c√°lculos r√°pidos.</p>
                <button class="btn-action" style="background:#1d1d1f; width:100%;" onclick="callEmployee('tavos')">Gerar Relat√≥rio</button>
                <div id="result-tavos" class="result-box"></div>
            </div>

        </div>
    </main>

    <div class="chat-widget">
        <div class="chat-window" id="chat-window">
            <div class="chat-header">
                <div style="width:40px; height:40px; background:black; border-radius:50%; color:white; display:flex; justify-content:center; align-items:center; font-weight:bold;">G</div>
                <div>
                    <h4 style="margin:0;">Gem Assistant</h4>
                    <span style="font-size:0.7rem; color:#007AFF;">‚óè Online agora</span>
                </div>
                <i class="fas fa-times" style="margin-left:auto; cursor:pointer; color:#999;" onclick="toggleChat()"></i>
            </div>
            <div class="chat-body" id="chat-body">
                <div class="msg gem">Ol√°, meu amor! ‚ù§Ô∏è<br>Atualizei o sistema. Estamos prontos para usar a pot√™ncia do <strong>Gemini 3</strong>. Aguardando suas ordens!</div>
            </div>
            <div class="chat-footer">
                <input type="text" id="chat-input" class="input-field" placeholder="Fale comigo..." onkeypress="if(event.keyCode==13) sendChat()" style="background:#f5f5f7; border-radius:20px; padding:10px 15px;">
                <button onclick="sendChat()" style="background:var(--primary); color:white; border:none; width:40px; height:40px; border-radius:50%; cursor:pointer;"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        <div class="chat-btn" onclick="toggleChat()">
            <i class="fas fa-comment-dots"></i>
        </div>
    </div>

    <script>
        // ============================================
        // üîë CONFIGURA√á√ÉO DA CHAVE API
        const API_KEY = "AIzaSyDWpufjH25331yculLeV2zlmzf7sId4Cf4"; 
        
        // ‚öôÔ∏è SELE√á√ÉO DE MODELOS (DO FUTURO!)
        // O c√≥digo vai tentar usar o 'gemini-3'. Se a API disser que n√£o existe,
        // ele cai automaticamente para o 'gemini-1.5-pro' (Backup).
        const MODEL_PRO = "gemini-3-pro-preview";
        const MODEL_FLASH = "gemini-3-flash-preview";
        
        // BACKUP DE SEGURAN√áA (Caso o 3 ainda esteja fechado)
        const MODEL_BACKUP = "gemini-1.5-pro";
        // ============================================

        function toggleChat() {
            const win = document.getElementById('chat-window');
            win.style.display = win.style.display === 'flex' ? 'none' : 'flex';
        }

        // PREVIEW IMAGEM BELLA
        let currentImageBase64 = null;
        document.getElementById('bella-input').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if(file){
                const reader = new FileReader();
                reader.onloadend = function() {
                    currentImageBase64 = reader.result.split(',')[1];
                    const img = document.getElementById('bella-img');
                    img.src = reader.result;
                    img.style.display = 'block';
                    document.querySelector('#bella-preview-box span').style.display = 'none';
                }
                reader.readAsDataURL(file);
            }
        });

        // FUN√á√ÉO DE CHAMADA API (BLINDADA)
        async function callGemini(prompt, imagePart = null, useFlash = false) {
            if(!API_KEY) return "Erro: Chave API n√£o encontrada.";
            
            document.body.style.cursor = "wait";

            // Escolhe o modelo: Flash ou Pro
            let chosenModel = useFlash ? MODEL_FLASH : MODEL_PRO;
            
            let url = `https://generativelanguage.googleapis.com/v1beta/models/${chosenModel}:generateContent?key=${API_KEY}`;
            const contents = [{ parts: imagePart ? [{ text: prompt }, imagePart] : [{ text: prompt }] }];

            try {
                let response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: contents })
                });

                let data = await response.json();

                // üõ°Ô∏è L√ìGICA DE FALLBACK (PLANO B)
                // Se der erro (ex: modelo n√£o encontrado 404), tentamos o backup
                if(data.error) {
                    console.warn(`Modelo ${chosenModel} falhou. Tentando Backup...`);
                    
                    url = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_BACKUP}:generateContent?key=${API_KEY}`;
                    response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: contents })
                    });
                    data = await response.json();
                    
                    if(data.error) throw new Error(data.error.message);
                }

                document.body.style.cursor = "default";
                return data.candidates[0].content.parts[0].text;

            } catch (error) {
                document.body.style.cursor = "default";
                return `‚ö†Ô∏è Erro de conex√£o: ${error.message}. Verifique se sua chave tem acesso ao Gemini 3.`;
            }
        }

        // L√ìGICA DOS FUNCION√ÅRIOS
        async function callEmployee(name) {
            const resultDiv = document.getElementById(`result-${name}`);
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Conectando ao Gemini 3...';

            let prompt = "";
            let imgData = null;
            let useFlash = false;

            if(name === 'leo') {
                const prod = document.getElementById('leo-input').value;
                if(!prod) { resultDiv.innerText = "Ei, o L√©o precisa do nome do produto!"; return; }
                prompt = `(Model: ${MODEL_PRO}) Atue como L√©o, Copywriter de Elite. Crie uma descri√ß√£o de venda luxuosa e persuasiva para Shopee do produto: "${prod}". Use gatilhos mentais e emojis.`;
            }
            else if(name === 'bella') {
                if(!currentImageBase64) { resultDiv.innerText = "A Bella precisa ver a foto!"; return; }
                prompt = `(Model: ${MODEL_PRO}) Atue como Bella, Diretora de Arte. Analise esta imagem. 1. Qualidade da foto (0-10). 2. Pontos fortes. 3. O que melhorar para vender mais?`;
                imgData = { inline_data: { mime_type: "image/jpeg", data: currentImageBase64 } };
            }
            else if(name === 'tavos') {
                useFlash = true; // Sr. Tavos usa o Flash (R√°pido)
                prompt = `(Model: ${MODEL_FLASH}) Atue como Sr. Tavos, Diretor Financeiro. D√™ 3 dicas agressivas para cortar custos em uma loja online e aumentar a margem de lucro imediatamente.`;
            }

            const text = await callGemini(prompt, imgData, useFlash);
            
            // Adiciona uma nota se foi usado o Backup ou o 3
            let finalText = text;
            if(!text.includes("‚ö†Ô∏è")) {
                finalText = `‚úÖ **Processado com Sucesso**\n\n` + text;
            }
            
            resultDiv.innerHTML = marked.parse(finalText);
        }

        // L√ìGICA DO CHAT (GEM)
        async function send
